<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Daily Christian reflections and prayers">
    
    <!-- Resource hints -->
    <link rel="dns-prefetch" href="https://twitter.com">
    <link rel="dns-prefetch" href="https://facebook.com">
    <link rel="preconnect" href="https://twitter.com">
    <link rel="preconnect" href="https://facebook.com">
    
    <!-- Preload critical assets -->
    <link rel="preload" href="css/styles.css" as="style">
    <link rel="preload" as="font" href="fonts/Roboto-Regular.ttf" type="font/ttf" crossorigin>
    <link rel="preload" as="font" href="fonts/Roboto-Bold.ttf" type="font/ttf" crossorigin>
    
    <!-- Cache control -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <title>The Daily Blessings</title>
    <!-- Move non-critical CSS to external file -->
    <link rel="stylesheet" href="css/styles.css" media="print" onload="this.media='all'">
    
    <!-- Inline critical CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        @font-face {
            font-family: 'Roboto';
            src: url('/fonts/Roboto-Regular.ttf') format('truetype');
            font-weight: 400;
            font-style: normal;
        }
        @font-face {
            font-family: 'Roboto';
            src: url('/fonts/Roboto-Bold.ttf') format('truetype');
            font-weight: 700;
            font-style: normal;
        }
        /* Only include styles needed for initial render */
        body { font-family: 'Roboto', sans-serif; margin: 0; padding: 0; }
        header { background: white; padding: 20px 0; font-weight: 700; display: flex; justify-content: center; align-items: center; flex-wrap: wrap; box-shadow: 0px 5px 10px rgba(51, 51, 51, 0.4); position: relative; }
        .logo { color: crimson; font-size: 30px; margin-left: 20px; border: 2px solid gold; border-radius: 50%; padding: 5px; background-color: white; }
        .company-name { color: crimson; display: flex; align-items: center; font-family: 'Roboto', sans-serif; position: relative; justify-content: center; flex-wrap: wrap; }
        .company-name-text { font-size: 1.2em; letter-spacing: 0.05em; text-align: center; }
        nav { margin-left: auto; display: flex; align-items: center; }
        .header-link { color: crimson; text-decoration: none; font-weight: bold; transition: color 0.3s ease; background-color: white; padding: 5px 10px; border-radius: 5px; }
        .header-link:hover { color: darkred; }
        .progress-container { position: fixed; width: 100%; height: 5px; top: 0; left: 0; background: #f3f3f3; }
        .progress-bar { height: 5px; background: crimson; width: 0; }
        main {
            padding: 20px;
            max-width: 1200px; /* Set a maximum width for the main content */
            margin: 0 auto; /* Center the main content */
        }
        section {
            margin-bottom: 20px;
            padding: 20px; /* Ensure consistent padding for sections */
            background: #ffffff; /* Set a background color for sections */
            border-radius: 8px; /* Add border radius for consistency */
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Add a subtle box shadow */
            max-width: 700px; /* Set a consistent maximum width for sections */
            margin: 0 auto 20px; /* Center the sections and add bottom margin */
        }
        p { font-weight: 400; font-size: 1.1em; line-height: 1.6; word-spacing: 0.03em; letter-spacing: 0.005em; margin-bottom: 1.2em; }
        h1, h2, h3, h4, h5, h6 { font-size: 1.5em; word-spacing: 0.03em; letter-spacing: 0.005em; text-align: center; }
        .theme-toggle { margin-left: auto; }
        .quiz-options {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        .quiz-options label {
            flex: 1 1 calc(50% - 5px);
            display: flex;
            align-items: center;
            padding: 8px 10px;
            margin: 4px 0;
            border-radius: 6px;
            background-color: #fff;
            border: 1px solid #ddd;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 0.9em;
        }
        .quiz-options label:hover {
            transform: translateX(3px);
            border-color: #ccc;
        }
        .quiz-options input[type="radio"] {
            margin-right: 8px;
        }
        .quiz-options .correct {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
            animation: slideIn 0.3s ease;
        }
        .quiz-options .incorrect {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
            animation: shake 0.5s ease;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        .answer-feedback {
            margin-top: 5px;
            font-size: 0.9em;
            padding: 8px;
            border-radius: 4px;
            display: none;
        }
        .answer-feedback.correct {
            display: block;
            background-color: #d4edda;
            color: #155724;
        }
        .answer-feedback.incorrect {
            display: block;
            background-color: #f8d7da;
            color: #721c24;
        }
        #reflection-content, #daily-prayer, #bible-verse {
            max-width: 700px;
            margin: 0 auto;
            text-align: justify;
        }
        #bible-verse {
            background-color: #fafdfb;
        }
        h1, h2, h3, h4, h5, h6 {
            text-align: center;
        }
        .reflection-meta {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            font-size: 0.9em;
        }
        .reflection-meta > * {
            white-space: nowrap;
        }
        #quiz p {
            word-spacing: 0.05em;
            letter-spacing: 0.01em;
        }
        .articles-library {
            margin-left: auto;
            display: flex;
            align-items: center;
        }
        .articles-library a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: crimson;
            color: white;
            text-decoration: none;
            transition: background-color 0.3s ease;
        }
        .articles-library a:hover {
            background-color: darkred;
        }
        .articles-library img {
            width: 24px;
            height: 24px;
        }
        footer {
            padding: 10px 0;
            font-size: 0.8em;
            color: #aaa;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            box-shadow: 0px 5px 10px rgba(51, 51, 51, 0.4);
        }
        footer p {
            margin: 5px 0;
        }
        footer button {
            margin-top: 10px;
            background-color: crimson;
            color: white;
            margin-left: 10px;
        }
        #reflection, #reflection-content, #daily-prayer, #quiz {
            padding: 20px;
            border-radius: 8px;
        }
        header, footer {
            border: 2px solid #ddd; /* Ensure the border color is visible */
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        .prayer-content p {
            font-weight: 400;
            font-size: 1.1em;
            line-height: 1.6;
            word-spacing: 0.03em;
            letter-spacing: 0.005em;
            margin-bottom: 1.2em;
        }
        .prayer-content {
            background-color: #fcfcf7;
        }
        @media (max-width: 768px) {
            header {
                padding: 10px 0;
            }
            .logo {
                font-size: 24px;
                margin-left: 10px;
            }
            .header-link {
                padding: 5px;
            }
            main {
                padding: 10px;
            }
        }
        @media (max-width: 480px) {
            .company-name {
                flex-direction: column;
                align-items: center;
            }
            .logo {
                margin-left: 0;
                margin-top: 10px;
            }
            nav {
                margin-left: 0;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="progress-container">
        <div class="progress-bar"></div>
    </div>
    <header>
        <div class="company-name">
            <span class="company-name-text">The Daily Blessings</span>
            <div class="logo">&#10014;</div>
        </div>
        <nav>
            <!-- Articles link removed -->
        </nav>
    </header>
    
    <main>
        <section id="lords-prayer">
            <h2>The Lord's Prayer</h2>
            <p>Our Father in heaven, hallowed be your name, your kingdom come, your will be done, on earth as it is in heaven. Give us today our daily bread. And forgive us our debts, as we also have forgiven our debtors. And lead us not into temptation, but deliver us from the evil one. For yours is the kingdom, the power, and the glory, forever and ever. Amen.</p>
        </section>
        
        <section id="bible-verse">
            <h2>Today's Bible Reading</h2>
            <p id="bible-verse-content"></p>
        </section>
        
        <section id="reflection">
            <h2>Reflection</h2>
            <div class="reflection-meta">
                <div id="reading-level">
                    <label for="reading-level-select">Difficulty:</label>
                    <select id="reading-level-select">
                        <option value="easy">Easy</option>
                        <option value="medium" selected>Medium</option>
                        <option value="hard">Hard</option>
                    </select>
                </div>
            </div>
            <div id="reflection-content"></div>
        </section>

        <section id="daily-prayer" class="prayer-content">
        </section>

        <section id="quiz">
            <h2>Trivia</h2>
            <div id="quiz-content" class="quiz-section"></div>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2025 The Daily Blessings. All rights reserved. This content is generated by AI and may not reflect the views of The Daily Blessings.</p>
        <button onclick="window.location.href='index.html'">Home</button>
    </footer>
    
    <script>
        const fallbackContent = {
            "date": "2025-02-08",
            "bible_verse": {
                "Proverbs 16:3": "Commit to the Lord whatever you do, and he will establish your plans."
            },
            "content": {
                "easy": [
                    `<h2 style="font-size: 1.2em;">Setting Goals God's Way</h2>
                    <p>Have you ever wanted to achieve something special but weren't sure how to start? Just like planning a trip needs a map, setting goals needs God's guidance! Think about Sarah, a 10-year-old who wanted to improve her grades. Instead of worrying, she learned to <strong>pray</strong> first and ask God for help. She made a simple plan: study 30 minutes daily, ask teachers for help, and review her work carefully. By trusting God and following her plan, Sarah not only got better grades but also learned that God cares about everything we do – even homework! Remember, when we give our plans to God first, He helps us succeed in ways that honor Him.</p>`
                ],
                "medium": [
                    `<h2 style="font-size: 1.2em;">Building Success with Divine Direction</h2>
                    <p>Meet Jason, a seventh-grader who discovered the power of combining faith with action. When basketball tryouts approached, he felt overwhelmed by the challenge. Instead of relying solely on practice, Jason learned to <strong>persevere</strong> through prayer and planning. He created SMART goals: Specific (improve free throws), Measurable (practice 50 shots daily), Achievable (start with basics), Relevant (align with team needs), and Time-bound (ready by tryouts).</p>
                    <p>What made Jason's approach special was putting God first. Every morning, he prayed about his goals and remembered Proverbs 16:3. This helped him stay focused and calm, even when practice got tough. Jason didn't make every shot, but his commitment and faith helped him improve significantly. His story teaches us that when we commit our plans to God, He gives us the strength and wisdom to reach our goals.</p>`
                ],
                "hard": [
                    `<h2 style="font-size: 1.2em;">Mastering Divine Purpose in Goal Achievement</h2>
                    <p>Imagine standing at a crossroads where your dreams meet God's purpose. This intersection is where true goal-setting wisdom begins. Consider the profound principle in Proverbs 16:3, which teaches us to <strong>consecrate</strong> our plans to the Lord. This ancient wisdom remarkably aligns with modern achievement psychology, demonstrating that goals anchored in higher purpose tend to have more lasting impact and meaningful outcomes.</p>
                    <p>Take the example of Emma, a dedicated 14-year-old student council representative. While her peers focused solely on academic achievements, Emma approached her leadership role through a biblical lens. She implemented SMART criteria (Specific, Measurable, Achievable, Relevant, Time-bound) while maintaining spiritual accountability. Her initiative to start a peer mentoring program wasn't just about improving school statistics; it reflected Christ's teaching about serving others.</p>
                    <p>This integration of faith and strategic planning creates a powerful framework for personal development. When we align our ambitions with divine wisdom, we discover that goal-setting becomes less about personal glory and more about stewarding our God-given potential. Success, then, isn't measured merely by achievements but by faithfulness to our calling and the positive impact we have on others. As you develop your own goals, consider how they might serve both your growth and God's purpose for your life.</p>`
                ]
            },
            "quiz": {
                "easy": [
                    {
                        "question": "According to Proverbs 16:3, what should we do with our plans?",
                        "options": [
                            "a) Keep them to ourselves",
                            "b) Commit them to the Lord",
                            "c) Share them with friends",
                            "d) Write them down only"
                        ],
                        "answer": "b) Commit them to the Lord"
                    }
                ],
                "medium": [
                    {
                        "question": "What is the first step in Christian goal setting?",
                        "options": [
                            "a) Making a detailed plan",
                            "b) Telling friends about your goals",
                            "c) Praying and seeking God's guidance",
                            "d) Writing down your goals"
                        ],
                        "answer": "c) Praying and seeking God's guidance"
                    },
                    {
                        "question": "What does SMART goal setting stand for?",
                        "options": [
                            "a) Simple, Manageable, Achievable, Real, Timely",
                            "b) Specific, Measurable, Achievable, Relevant, Time-bound",
                            "c) Strategic, Meaningful, Actionable, Realistic, Tested",
                            "d) Short, Modern, Accurate, Reasonable, Tracked"
                        ],
                        "answer": "b) Specific, Measurable, Achievable, Relevant, Time-bound"
                    }
                ],
                "hard": [
                    {
                        "question": "How does committing our plans to God help us?",
                        "options": [
                            "a) It guarantees immediate success",
                            "b) It aligns our will with God's purpose",
                            "c) It removes all obstacles",
                            "d) It makes planning unnecessary"
                        ],
                        "answer": "b) It aligns our will with God's purpose"
                    },
                    {
                        "question": "Which aspect of SMART goals most directly relates to Proverbs 16:3?",
                        "options": [
                            "a) Specific",
                            "b) Measurable",
                            "c) Relevant",
                            "d) Time-bound"
                        ],
                        "answer": "c) Relevant"
                    },
                    {
                        "question": "What is the biblical perspective on goal-setting?",
                        "options": [
                            "a) Goals are unnecessary for Christians",
                            "b) Goals should be set independently of God",
                            "c) Goals should align with God's will and wisdom",
                            "d) Goals are only for worldly pursuits"
                        ],
                        "answer": "c) Goals should align with God's will and wisdom"
                    },
                    {
                        "question": "Which biblical principle is demonstrated in the story of Emma?",
                        "options": [
                            "a) Seeking personal glory",
                            "b) Working independently",
                            "c) Serving others through leadership",
                            "d) Avoiding challenges"
                        ],
                        "answer": "c) Serving others through leadership"
                    }
                ]
            }
        };

        async function loadDailyContent() {
            try {
                const response = await fetch('data/daily.json');
                if (!response.ok) throw new Error('Network response was not ok');
                return await response.json();
            } catch (error) {
                console.warn('Failed to load daily content, using fallback:', error);
                return fallbackContent;
            }
        }

        document.addEventListener('DOMContentLoaded', async function() {
            const bibleVerseContent = document.getElementById('bible-verse-content');
            const reflectionContent = document.getElementById('reflection-content');
            const quizContent = document.getElementById('quiz-content');
            const readingLevelSelect = document.getElementById('reading-level-select');

            const dailyContent = await loadDailyContent();

            function loadContent(level = 'medium') {
                try {
                    const verseKey = Object.keys(dailyContent.bible_verse)[0];
                    const verseText = dailyContent.bible_verse[verseKey];
                    bibleVerseContent.textContent = `${verseKey}: ${verseText}`;
                    reflectionContent.innerHTML = dailyContent.content[level].map(paragraph => `<p>${paragraph}</p>`).join("");
                    loadQuiz(level);
                    
                    const wordsPerMinute = 200;
                    const words = reflectionContent.textContent.trim().split(/\s+/).length;
                    const minutes = Math.ceil(words / wordsPerMinute);
                    let metaContainer = document.querySelector('.reflection-meta');
                    let readingTimeEl = metaContainer.querySelector('.reading-time');
                    if (!readingTimeEl) {
                        readingTimeEl = document.createElement('div');
                        readingTimeEl.className = 'reading-time';
                        metaContainer.appendChild(readingTimeEl);
                    }
                    readingTimeEl.textContent = `Reading time: ${minutes} min${minutes !== 1 ? 's' : ''}`;
                } catch (error) {
                    reflectionContent.innerHTML = '<p>Unable to load content</p>';
                }
            }

            function loadQuiz(level = 'medium') {
                let quizHtml = '';
                const questions = dailyContent.quiz[level] || [];
                questions.forEach((quizItem, index) => {
                    quizHtml += `
                        <div class="quiz-question">
                            <p>${quizItem.question}</p>
                            <div class="quiz-options">
                                ${quizItem.options.map(option => `
                                    <label>
                                        <input type="radio" name="q${index}" value="${option}" data-answer="${quizItem.answer}">
                                        ${option}
                                    </label>
                                `).join('')}
                            </div>
                            <div class="answer-feedback"></div>
                        </div>
                    `;
                });
                quizContent.innerHTML = quizHtml || '<p>No questions available for this difficulty level.</p>';

                document.querySelectorAll('.quiz-options input[type="radio"]').forEach(radio => {
                    radio.addEventListener('change', function() {
                        const selectedOption = this.value;
                        const correctAnswer = this.getAttribute('data-answer');
                        const parentLabel = this.parentElement;
                        const feedbackDiv = parentLabel.closest('.quiz-question').querySelector('.answer-feedback');
                        const allLabels = parentLabel.closest('.quiz-options').querySelectorAll('label');
                        
                        allLabels.forEach(label => {
                            label.classList.remove('correct', 'incorrect');
                        });

                        if (selectedOption === correctAnswer) {
                            parentLabel.classList.add('correct');
                            feedbackDiv.innerHTML = `
                                <div class="answer-feedback show correct">
                                    <span>✓</span>Correct!
                                </div>`;
                        } else {
                            parentLabel.classList.add('incorrect');
                            feedbackDiv.innerHTML = `
                                <div class="answer-feedback show incorrect">
                                    <span>✗</span>Correct answer: ${correctAnswer}
                                </div>`;
                        }
                    });
                });
            }

            readingLevelSelect.addEventListener('change', function() {
                const selectedLevel = readingLevelSelect.value;
                loadContent(selectedLevel);
            });

            loadContent('medium');

            function addSocialSharing() {
                const shareContainer = document.createElement('div');
                shareContainer.className = 'social-share';
                shareContainer.innerHTML = `
                    <button class="share-button" onclick="window.open('https://twitter.com/intent/tweet?text=${encodeURIComponent(document.title)}&url=${encodeURIComponent(window.location.href)}')">Share on Twitter</button>
                    <button class="share-button" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}')">Share on Facebook</button>
                `;
                document.querySelector('main').appendChild(shareContainer);
            }

            addSocialSharing();

            let ticking = false;
            window.addEventListener('scroll', () => {
                if (!ticking) {
                    window.requestAnimationFrame(() => {
                        const windowHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                        const progress = (window.scrollY / windowHeight) * 100;
                        document.querySelector('.progress-bar').style.width = progress + '%';
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        });

        document.addEventListener('DOMContentLoaded', function() {
            const morningPrayer = `
                <h2>Morning Prayer</h2>
                <p>In the name of the Father, and of the Son, and of the Holy Spirit. Amen. O Lord, bless my day and help me to do Your will. Thank You for the night’s rest and for this new morning. Fill my heart with Your love and kindness. Guide me to be obedient, patient, and joyful. Help me to love my parents, my family, my teachers, my friends, and all people. Keep me from evil and teach me to walk in Your light. Protect me throughout the day and let me always remember that You are with me. Lord Jesus Christ, have mercy on me and help me to grow in faith and goodness. Holy Mother of God, pray for me. My guardian angel, watch over me. Amen.</p>
            `;
            const eveningPrayer = `
                <h2>Evening Prayer</h2>
                <p>In the name of the Father, and of the Son, and of the Holy Spirit. Amen. O Lord, I thank You for this day and for all the blessings You have given me. Forgive me for any wrong I have done, and help me to be better tomorrow. Bless my parents, my family, my teachers, my friends, and all people. Keep us safe through the night. Send Your holy angels to guard me and protect me from all harm. Lord Jesus Christ, be with me always. Holy Mother of God, pray for me. My guardian angel, watch over me as I sleep. Amen.</p>
            `;

            const currentHour = new Date().getHours();
            const prayerContent = currentHour < 12 ? morningPrayer : eveningPrayer;

            document.getElementById('daily-prayer').innerHTML = prayerContent;
        });
    </script>
</body>
</html>